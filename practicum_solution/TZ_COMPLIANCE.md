# Проверка соответствия ТЗ

## Исследование и выбор хранилища
- README описывает сравнение MongoDB и PostgreSQL на объёмах 10+ млн лайков, с выводом о выборе MongoDB как основного оперативного хранилища и PostgreSQL для аналитики, что закрывает требование об исследовании и обосновании хранения.
- В разделе запуска зафиксирован сценарий "docker compose up" с автоматическим сидированием и бенчмарком, подтверждающим соблюдение SLA 200 мс на чтение.
- Итоги исследования сформулированы как документированное решение по хранилищу и архитектурной развилке (отдельный сервис против расширения существующего).

## Скрипты генерации и тестирования
- `scripts/generate_data.py` выполняет стримовую генерацию идентичного датасета для MongoDB и PostgreSQL, параметризуемого через `.env`, и создаёт индексы перед вставкой.
- `scripts/test_performance.py` воспроизводит реальные сценарии (лайки пользователя, счётчики фильмов, закладки, средний рейтинг, сортировка рецензий), проверяет укладывание в 200 мс и сохраняет таблицу в `reports/performance.md`.
- Отчёт монтируется на хост через volume, поэтому результаты нагрузочного теста сохраняются после завершения контейнера.

## Инфраструктура и воспроизводимость
- `docker-compose.yml` поднимает MongoDB, PostgreSQL, FastAPI API, Filebeat, Logstash и Elasticsearch/Kibana; сервис `seed` наполняет БД, а `benchmark` запускает тесты, чтобы один запуск давал готовый стенд и метрики.
- Конфигурации `logstash.conf` и `filebeat.yml` настроены для разбора uvicorn-логов из контейнера API и доставки их в Elasticsearch.
- В `env.example` перечислены обязательные переменные (DSN Sentry, размеры датасета, параметры подключений), упрощая подготовку окружения.

## API и CRUD
- Прототип FastAPI разделён на роутеры для лайков, рецензий, закладок и фильмов, использует MongoDB через Motor и предоставляет CRUD-операции, требуемые ТЗ.
- Главный модуль инициализирует подключения, создаёт индексы и настраивает Sentry SDK для отправки ошибок в облачный проект.
- В README описан способ локального запуска API и использования его вместе с инфраструктурой.

## CI и качество
- Workflow `.github/workflows/practicum-ci.yml` запускает wemake-python-styleguide с HTML-отчётом, mypy и pytest в матрице Python 3.10–3.12 на push/pull_request в master.
- По успешному завершению отправляется уведомление в Telegram, а отчёт линтера сохраняется как артефакт, закрывая требования CI из ТЗ.
- Код и скрипты снабжены типами и докстрингами, чтобы проходить строгие проверки, а тесты гарантируют корректность импорта ключевых модулей.
